= Changelog
:toc: macro
:toclevels: 1
:toc-title:

All notable changes to this project will be documented in this file.

The format is based on http://keepachangelog.com/en/1.0.0/[Keep a Changelog]
and this project adheres to http://semver.org/spec/v2.0.0.html[Semantic Versioning].

[discrete]
==== Versions
toc::[]

== https://github.com/d4l-data4life/hc-sdk-kmp/compare/v1.13.0...main[Unreleased]

=== Added

=== Changed

=== Removed

=== Fixed

=== Bumped

=== Migration

== https://github.com/d4l-data4life/hc-sdk-kmp/compare/v1.12.0...v1.13.0[1.13.0]

=== Added

* Enable count for arbitrary data.

=== Changed

* ApiService is now in Kotlin.
* Errors, which occurred during encryption or decryption of a resource, are now D4LRuntimeExceptions.

=== Bumped

* OkHTTP 4.7.2 -> 4.9.1
* FHIR SDK 1.4.0 -> 1.5.0

=== Migration

== https://github.com/d4l-data4life/hc-sdk-kmp/compare/v1.11.0...v1.12.0[1.12.0]

=== Added

* LegacyEncoding for Javascript.

=== Changed

* The clients sending now the correct version of the SDK.

=== Fixed

* Nullpointer occurred while uploading a Records, which does not alter Attachments.

=== Bumped

* Android Gradle Plugin 4.1.3 -> 4.2.1

== https://github.com/d4l-data4life/hc-sdk-kmp/compare/v1.10.0...v1.11.0[1.11.0]

=== Added

* Version control for supported/unsupported versions.
* The Client now exposes the UserId.
* Add Fhir4 support for download Record and Attachment(s).

=== Changed

* `CryptoSecureStore`, `DocumentUploadResponse`, `CommonKeyResponse`, `UserInfo` to Kotlin.
* _*BREAKING*_ Change Android minSDK 21 -> 23
* targetSdkVersion & compileSdkVersion 29 -> 30

=== Bumped

* *_BREAKING_* FHIR SDK 1.3.1 -> 1.4.0
* *_BREAKING_* Kotlin 1.3.75 -> 1.4.32
* Gradle 6.7.1 -> 6.8.3
* Android 4.1.1 -> 4.1.3
* ktlint: 0.40 -> 0.41
* *_BREAKING_* Moshi 1.8.0 -> 1.12.0

=== Migration

* Change Android support to min Android 6.0 (API 23) to use this version of the SDK.

== https://github.com/d4l-data4life/hc-sdk-kmp/compare/v1.9.2...v1.10.0[1.10.0]

=== Changed

* `ModelVersion` to Kotlin.

=== Fixed

* RecordService#downloadData failed due to attachments, which are null.
* RecordService#checkDataRestrictions does not check multiple attachments correctly, if one of them is null or has null as data payload.
* Api calls for search and count did not respect the query schema, which results always in a query of all records.

=== Bumped

* HC-FHIR-SDK 1.2.1 -> 1.3.1


== https://github.com/d4l-data4life/hc-sdk-kmp/compare/v1.9.1...v1.9.2[1.9.2]

=== Added

* Add information how to use matching fallbacks for Android to README
* `count` to Fhir4Client

=== Changed

* Tags are now encoded (URI) and in lowercase
* Annotations are now encoded (URI), in lowercase and fail, if they are empty
* `EncryptedRecord`, `EncryptedKey`, `EncryptedKeyTypeAdapter` to Kotlin

=== Fixed

* RecordService#deleteRecord invocation had mixed user and resource id.
* RecordService#fetchRecords invocation had mixed user and resource id.
* NullPointerException when using DomainResource as resourceType for fetch/search.
* RecordService#countRecords filters now with Annotation when counting all Fhir3Records.
* RecordService did not respect legacy tags/annotations.
* RecordService called on fetch/search DATE_FORMAT instead DATE_FORMATTER.

== https://github.com/d4l-data4life/hc-sdk-kmp/compare/v1.9.0...v1.9.1[1.9.1]

=== Fixed

* RecordService#checkDataRestrictions for Resources with unextractable Attachments
* missing Task in SDKContract for some of the operations
* all Errors to be reported to our Logger

=== Bumped

* HC-FHIR-SDK 1.1.0 -> 1.2.1


== https://github.com/d4l-data4life/hc-sdk-kmp/compare/v1.8.0...v1.9.0[1.9.0]

=== Added

* Add arbitrary data support
* Add annotations support
* Add FHIR 4 support

=== Changed

* Changed internal implementation to support FHIR 4 capabilities
* `RecordService`, `TaggingService`, `TagEncryptionService`, `Record`, `DecryptedRecord` to Kotlin
* `TagHelper`, `FhirService`, `ImageResizer`, `FileService`, `NetworkConnectivityService`, `CryptoService` to Kotlin

=== Bumped

* Gradle 6.5 -> 6.7.1
* Android Studio 4.0.1 -> 4.1.1
* *_BREAKING_* FHIR SDK 0.7.0 -> 1.0.0
* *_BREAKING_* FHIR Helper SDK 1.3.1 -> 1.4.0
* D4L FHIR SDK 1.0.0 -> 1.1.0
* D4L FHIR Helper SDK 1.4.0 -> 1.4.1

=== Migration

* https://github.com/d4l-data4life/hc-fhir-sdk-java/releases/tag/v1.0.0[FHIR SDK 1.0.0 -> BREAKING change]
* https://github.com/d4l-data4life/hc-fhir-helper-sdk-kmp/releases/tag/v1.4.0[FHIR Helper SDK 1.4.0 -> BREAKING change]


== https://github.com/d4l-data4life/hc-sdk-kmp/compare/v1.7.3...v1.8.0[1.8.0]

=== Added

* Add ingestion SDK client (relies on external OAuth handling).


== https://github.com/d4l-data4life/hc-sdk-kmp/compare/v1.7.2...v1.7.3[1.7.3]

=== Added

* SDKContract method to get active user session token
* User service getSessionToken method now returns with an active token not the last known.
